--- 
- name: set Hive blueprint path
  set_fact:
    blueprint_conf: "{{ role_path }}/templates/hive-blueprint.j2"
    
# Extra variables not generated by Jumbo
# Lighten the blueprint for more readability
#
# - name: set variable used in hdfs-blueprint.j2
#   set_fact:
#     metrics:
#       foo: "bar"

- name: Build variables for template
  set_fact:
    HIVE:
      metastores_FQDN: "{{ serv_comp_host['HIVE']['HIVE_METASTORE'] | map('regex_replace', '^(.*)$', '\\1.' + domain) | list }} }}"
      webhcat_FQDN: "{{ serv_comp_host['HIVE']['WEBHCAT_SERVER'][0] }}.{{ domain }}"

- name: Registering service HIVE
  debug:
    msg: "Added {{ blueprint_conf }}"
  changed_when: true
  notify: "add service to blueprint"

- meta: flush_handlers
